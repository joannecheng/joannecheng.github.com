:css
  .funnel {
    font-family: "Gotham Rounded SSm A","Gotham Rounded SSm B","Helvetica Neue",Helvetica,Arial,sans-serif;
  }

  svg.funnel-graph, div.labels {
    clear: both;
  }

  .axis path {
    fill: none;
    stroke: black;
  }
  .axis line {
    fill: none;
    stroke: black;
  }
  .axis text {
    font-size: 0.85em;
    fill: black;
  }

  rect.bar {
    fill: rgb(4, 210, 191);
  }

  div.graph-label {
    float: left;
  }

  span.label-text {
    font-weight: bold;
  }

  /* Bottom Labels */
  div.label-details {
    margin-top: 1em;
    padding-right: 2em;
  }
  .count-text {
    display: inline-block;
    vertical-align: bottom;
    width: 66%;
    font-size: 1em;
  }
  .percent-change-text {
    display: inline-block;
    vertical-align: bottom;
    width: 33%;
    color: #777;
    font-size: 0.75em;
  }

= javascript_include_tag 'd3.min'
= javascript_include_tag 'https://d26b395fwzu5fz.cloudfront.net/3.2.7/keen.min.js'
:javascript
  function processFunnelResult(err, response) {
    console.log(response);
  }

  //comment out keys for now
  const client = new Keen({
    projectId: "",
    readKey: ""
  });

  const funnel = new Keen.Query("funnel", {
    steps: [
      {
        "event_collection": "create_user",
        "actor_property": "user.id"
      },
      {
        "event_collection": "create_organization",
        "actor_property": "user.id"
      },
      {
        "event_collection": "analysis_api_call",
        "actor_property": "request.params.user_id"
      }
    ]
  });

  //client.run(funnel, processFunnelResult);

.funnel

= javascript_include_tag 'experiments/funnels/main'
